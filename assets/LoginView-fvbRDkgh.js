import{u as b,r as C,c as u,o as g,j as k,a as r,b as i,d as e,k as c,f as m,v as p,g as _,l as y,m as x}from"./index-C14HsfuV.js";import{S as V,v as f}from"./SideBanner-Cxkj17Ko.js";import{T as S,e as B}from"./cookieHandler-SwqydL5l.js";import{u as N}from"./auth-D51qw_Xi.js";const T={id:"loginPage",class:"bg-yellow"},L={class:"conatiner loginPage vhContainer"},j={class:"formControls",action:"index.html"},q=e("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),E=e("label",{class:"formControls_label",for:"email"},"Email",-1),I={key:0},M=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1),P={key:1},U=["disabled"],z={__name:"LoginView",setup(A){const d=b(),a=N(),o=C({email:"",password:""}),l=u(()=>{const s=o.value;return{email:f(s.email,"email"),password:f(s.password,"password")}}),h=u(()=>Object.values(l.value).includes(!1)),v=async()=>{try{await a.login(o.value),S("success","登入成功"),d.push("/todo")}catch(s){B(s)}};return g(async()=>{await a.authCheck(),a.status&&d.push("/todo")}),(s,t)=>{const w=k("router-link");return r(),i("div",T,[e("div",L,[c(V),e("div",null,[e("form",j,[q,E,m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.value.email=n),class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:""},null,512),[[p,o.value.email]]),l.value.email?_("",!0):(r(),i("span",I,"請正確輸入 email")),M,m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.value.password=n),class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[p,o.value.password]]),l.value.password?_("",!0):(r(),i("span",P,"請正確輸入密碼")),e("button",{type:"button",class:"formControls_btnSubmit",onClick:v,disabled:h.value}," 登入 ",8,U),c(w,{to:"/register",class:"formControls_btnLink"},{default:y(()=>[x("註冊帳號")]),_:1})])])])])}}};export{z as default};
