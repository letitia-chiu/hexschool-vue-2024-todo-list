import{p as d,r as s}from"./index-C14HsfuV.js";import{b as n,c as u,e as c}from"./cookieHandler-SwqydL5l.js";const g=d("auth",()=>{const t=s(!1),o=s(),a=s();async function l(e){const{data:r}=await n.users.login(e),{nickname:v,token:h,exp:k}=r;u.set(h,k),t.value=!0,o.value=v}async function i(){try{await n.users.logout(a.value),t.value=!1,u.delete()}catch(e){c(e)}}async function f(){try{const e=u.get();if(!e)return;a.value=e;const{data:r}=await n.users.checkAuth(a.value);o.value=r.nickname,t.value=!0}catch(e){t.value=!1,c(e)}}return{status:t,user:o,token:a,login:l,logout:i,authCheck:f}});export{g as u};
